<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cat√°logo de Produtos</title>

<style>
/* ===== RESET ===== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
body {
    font-family: 'Segoe UI', Arial, sans-serif;
    background-color: #fafafa;
    color: #333;
    line-height: 1.6;
    transition: background-color 0.3s, color 0.3s;
    overflow-x: hidden;
}

/* ===== HEADER ===== */
header {
    background: #ffffff;
    padding: 20px 30px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    position: sticky;
    top: 0;
    z-index: 100;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}
header h1 {
    font-size: 1.8rem;
    color: #007bff;
    font-weight: 700;
    text-transform: uppercase;
}

/* ===== BOT√ïES DARK MODE ===== */
.theme-buttons {
    position: absolute;
    right: 20px;
    top: 15px;
    display: flex;
    gap: 8px;
}
.theme-buttons button {
    background: none;
    border: 1px solid #007bff;
    border-radius: 20px;
    padding: 5px 10px;
    color: #007bff;
    cursor: pointer;
    font-size: 0.9rem;
    transition: 0.3s;
}
.theme-buttons button:hover {
    background-color: #007bff;
    color: #fff;
}

/* ===== CATEGORIAS + PESQUISA ===== */
.categories {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 10px;
    padding: 15px;
    background-color: #fff;
    border-bottom: 1px solid #eee;
}
.search-bar input {
    padding: 8px 15px;
    border: 1px solid #ddd;
    border-radius: 20px;
    width: 250px;
    transition: 0.3s;
}
.search-bar input:focus {
    border-color: #007bff;
    outline: none;
}
.category {
    background-color: #007bff;
    color: white;
    padding: 8px 20px;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: 0.3s;
}
.category:hover {
    background-color: #0056b3;
}

/* ===== CARROSSEL ===== */
.carousel {
    position: relative;
    width: 100%;
    overflow: hidden;
}
.carousel-container {
    display: flex;
    transition: transform 0.8s ease;
}
.carousel-item {
    min-width: 100%;
}
.carousel-item img {
    width: 100%;
    height: 400px;
    object-fit: cover;
}
.carousel button {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background-color: rgba(0,0,0,0.5);
    color: #fff;
    border: none;
    padding: 12px 18px;
    font-size: 18px;
    border-radius: 50%;
    cursor: pointer;
    transition: 0.3s;
}
.carousel button:hover {
    background-color: rgba(0,0,0,0.8);
}
.prev { left: 20px; }
.next { right: 20px; }

/* ===== CONTAINER PRINCIPAL ===== */
.main-container {
    padding: 30px;
    max-width: 1200px;
    margin: auto;
}

/* ===== T√çTULOS ===== */
.section-title {
    position: relative;
    text-align: center;
    margin: 40px 0 25px;
    font-size: 1.8rem;
    color: #007bff;
    font-weight: bold;
}
.section-title::before,
.section-title::after {
    content: "";
    position: absolute;
    top: 50%;
    width: 30%;
    height: 2px;
    background-color: #007bff33;
}
.section-title::before { left: 0; }
.section-title::after { right: 0; }

/* ===== PRODUTOS ===== */
.product-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
}
.product-card {
    background-color: #fff;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    text-align: center;
}
.product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}
.product-card img {
    width: 100%;
    border-radius: 8px;
    margin-bottom: 10px;
}
.product-card p {
    font-weight: 500;
    margin-bottom: 5px;
}
.product-card span {
    color: #007bff;
    font-weight: bold;
}

/* ===== WHATSAPP ===== */
.whatsapp-btn {
    position: fixed;
    bottom: 25px;
    right: 25px;
    background-color: #25D366;
    color: white;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: 0.3s;
    z-index: 200;
}
.whatsapp-btn:hover {
    background-color: #1ebd5a;
    transform: scale(1.05);
}

/* ===== RODAP√â ===== */
footer {
    text-align: center;
    padding: 20px;
    background-color: #fff;
    border-top: 1px solid #eee;
    margin-top: 40px;
    color: #888;
}

/* ===== DARK MODE ===== */
body.dark {
    background-color: #121212;
    color: #eee;
}
body.dark header,
body.dark .categories,
body.dark footer {
    background-color: #1c1c1c;
    border-color: #333;
}
body.dark .product-card {
    background-color: #1e1e1e;
    box-shadow: 0 2px 6px rgba(255,255,255,0.1);
}

/* ===== TRANSI√á√ïES ===== */
body.fade-transition {
    transition: background-color 0.6s ease, color 0.6s ease;
}
body.slide-transition {
    animation: slideTheme 0.5s ease;
}
@keyframes slideTheme {
    from { transform: translateX(20px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}
</style>
</head>

<body>

<header>
    <h1>Cat√°logo de Produtos</h1>
    <div class="theme-buttons">
        <button id="fadeModeBtn">üåô Fade</button>
        <button id="slideModeBtn">üåô Slide</button>
    </div>
</header>

<section class="categories">
    <div class="search-bar">
        <input type="text" placeholder="Buscar produtos...">
    </div>
</section>

<section class="carousel">
    <div class="carousel-container">
        <div class="carousel-item"><img src="https://picsum.photos/1920/400?random=1" alt="Banner 1"></div>
        <div class="carousel-item"><img src="https://picsum.photos/1920/400?random=2" alt="Banner 2"></div>
        <div class="carousel-item"><img src="https://picsum.photos/1920/400?random=3" alt="Banner 3"></div>
    </div>
    <button class="prev">&#10094;</button>
    <button class="next">&#10095;</button>
</section>

<section class="main-container">
    <h2 class="section-title">Produtos</h2>
    <div class="product-cards"></div>
</section>

<a href="https://wa.me/5500000000000" target="_blank" class="whatsapp-btn" title="Fale conosco no WhatsApp">üí¨</a>

<footer>
    ¬© 2025 Cat√°logo de Produtos - Todos os direitos reservados.
</footer>

<script>
/* ===== CARROSSEL ===== */
let currentSlide = 0;
const slides = document.querySelectorAll('.carousel-item');
const container = document.querySelector('.carousel-container');
document.querySelector('.next').addEventListener('click', () => showSlide(currentSlide + 1));
document.querySelector('.prev').addEventListener('click', () => showSlide(currentSlide - 1));
function showSlide(index) {
    if (index >= slides.length) currentSlide = 0;
    else if (index < 0) currentSlide = slides.length - 1;
    else currentSlide = index;
    container.style.transform = `translateX(-${currentSlide * 100}%)`;
}
setInterval(() => showSlide(currentSlide + 1), 4000);

/* ===== DARK MODE ===== */
document.getElementById('fadeModeBtn').addEventListener('click', () => toggleDarkMode('fade'));
document.getElementById('slideModeBtn').addEventListener('click', () => toggleDarkMode('slide'));
function toggleDarkMode(type) {
    document.body.classList.toggle('dark');
    document.body.classList.remove('fade-transition', 'slide-transition');
    if (type === 'fade') document.body.classList.add('fade-transition');
    else if (type === 'slide') document.body.classList.add('slide-transition');
}

/* ===== GOOGLE SHEETS ===== */
const spreadsheetId = '1yJqq-aL5oUnBtxb93bJy2JwLx3ccwuaoQz_UbHAI5_s'; // substitua pelo ID da planilha
const url = `https://docs.google.com/spreadsheets/d/${spreadsheetId}/gviz/tq?tqx=out:json`;

let produtos = [];
let colIndex = {};

fetch(url)
  .then(res => res.text())
  .then(txt => {
    const jsonStr = txt.match(/(?<=\().*(?=\);)/s)[0];
    const json = JSON.parse(jsonStr);

    const cols = json.table.cols.map(c => c.label.trim().toLowerCase());
    cols.forEach((colName, i) => colIndex[colName] = i);

    produtos = json.table.rows.map(row => {
      const c = row.c;
      return {
        nome: c[colIndex['nome']]?.v || '',
        categoria: c[colIndex['categoria']]?.v || '',
        preco: c[colIndex['pre√ßo']]?.v || '',
        link: c[colIndex['link']]?.v || '#',
        imagem: c[colIndex['imagem']]?.v || 'https://via.placeholder.com/300x200',
        ativo: c[colIndex['ativo']]?.v ?? true,
        desconto: c[colIndex['desconto']]?.v || ''
      };
    }).filter(p => p.ativo);

    populaCategorias();
    renderProdutos(produtos);
  })
  .catch(console.error);

/* ===== RENDER PRODUTOS ===== */
function renderProdutos(lista) {
  const container = document.querySelector('.product-cards');
  container.innerHTML = '';
  if (lista.length === 0) {
    container.innerHTML = '<p>Nenhum produto encontrado.</p>';
    return;
  }
  lista.forEach(p => {
    const card = document.createElement('div');
    card.classList.add('product-card');
    card.innerHTML = `
      <a href="${p.link}" target="_blank">
        <img src="${p.imagem}" alt="${p.nome}">
      </a>
      <p>${p.nome}</p>
      <span>${p.desconto ? `<s>R$ ${p.preco}</s> <strong style="color:#e74c3c">R$ ${p.desconto}</strong>` : `R$ ${p.preco}`}</span>
    `;
    container.appendChild(card);
  });
}

/* ===== CATEGORIAS ===== */
function populaCategorias() {
  const catContainer = document.querySelector('.categories');
  const searchBar = document.querySelector('.search-bar');
  const categorias = [...new Set(produtos.map(p => p.categoria).filter(Boolean))];
  catContainer.innerHTML = '';
  const todosBtn = document.createElement('button');
  todosBtn.textContent = 'Todos';
  todosBtn.classList.add('category');
  todosBtn.addEventListener('click', () => renderProdutos(produtos));
  catContainer.appendChild(todosBtn);
  categorias.forEach(cat => {
    const btn = document.createElement('button');
    btn.classList.add('category');
    btn.textContent = cat;
    btn.addEventListener('click', () => {
      const filtrados = produtos.filter(p => p.categoria === cat);
      renderProdutos(filtrados);
    });
    catContainer.appendChild(btn);
  });
  catContainer.appendChild(searchBar);
}

/* ===== PESQUISA ===== */
document.querySelector('.search-bar input').addEventListener('input', e => {
  const termo = e.target.value.toLowerCase();
  const filtrados = produtos.filter(p => p.nome.toLowerCase().includes(termo));
  renderProdutos(filtrados);
});
</script>

</body>
</html>
